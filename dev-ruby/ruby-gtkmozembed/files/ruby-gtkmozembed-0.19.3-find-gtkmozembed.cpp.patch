--- ruby-gnome2-all-0.19.3/gtkmozembed/extconf.rb	2009-09-23 10:43:01.000000000 +1000
+++ ruby-gnome2-all-0.19.3/gtkmozembed/extconf.rb	2010-03-09 20:59:47.000000000 +1000
@@ -58,7 +58,8 @@
 add_depend_package("gtk2", "gtk/src", TOPDIR)
 
 if have_library("xpcomglue")
-  have_header("gtkmozembed_glue.cpp") or exit 1
+  $CFLAGS << " -DXPCOM_GLUE"
+  find_header("gtkmozembed_glue.cpp", *Dir.glob('/usr/include/xulrunner-*/**/')) or exit 1
   CONFIG['LDSHARED'].gsub!(/\$\(CC\)/, "$(CXX)")
 elsif have_library("gtkembedmoz")
   have_func('gtk_moz_embed_new') or exit 1
